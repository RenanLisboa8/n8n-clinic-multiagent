# ====================================
# n8n Clinic Multi-Agent System
# Environment Configuration Template
# ====================================
#
# INSTRUCTIONS:
# 1. Copy this file to .env: cp env.example .env
# 2. Fill in all the required values marked with <REQUIRED>
# 3. Customize optional values as needed
# 4. NEVER commit the .env file to version control
#
# NOTE: Clinic-specific values (name, phone, address) and Google Calendar IDs
# are stored per-tenant in the database, NOT as environment variables.
#
# ====================================

# ====================================
# GENERAL CONFIGURATION
# ====================================
TZ=America/Sao_Paulo
ENVIRONMENT=production

# ====================================
# POSTGRESQL DATABASE
# ====================================
POSTGRES_USER=n8n_clinic
POSTGRES_PASSWORD=<REQUIRED>
POSTGRES_DB=n8n_clinic_db
POSTGRES_PORT=5432

# n8n application database role (restricted permissions)
N8N_APP_PASSWORD=<REQUIRED>

# ====================================
# REDIS CACHE
# ====================================
REDIS_PASSWORD=<REQUIRED>
REDIS_MAX_MEMORY=256mb
REDIS_PORT=6379

# ====================================
# EVOLUTION API (WhatsApp)
# ====================================
EVOLUTION_BASE_URL=http://localhost:8080
EVOLUTION_API_KEY=<REQUIRED>
EVOLUTION_PORT=8080
WA_CONNECTION_TIMEOUT=60000
WA_RECONNECT_INTERVAL=5000
WA_PHONE_CLIENT=Evolution API Clinic
QRCODE_LIMIT=30
EVOLUTION_LOG_LEVEL=ERROR

# ====================================
# N8N WORKFLOW AUTOMATION
# ====================================
N8N_PORT=5678
N8N_PROTOCOL=http
N8N_WEBHOOK_URL=http://localhost:5678/
N8N_DB_SCHEMA=public
N8N_ENCRYPTION_KEY=<REQUIRED>
N8N_JWT_SECRET=<REQUIRED>
N8N_EXECUTIONS_TIMEOUT=300
N8N_EXECUTIONS_TIMEOUT_MAX=3600
N8N_SAVE_ON_ERROR=all
N8N_SAVE_ON_SUCCESS=all
N8N_SAVE_ON_PROGRESS=true
N8N_DATA_MAX_AGE=168
N8N_LOG_LEVEL=info
N8N_LOG_OUTPUT=console,file
N8N_ENDPOINT_REST=rest
N8N_ENDPOINT_WEBHOOK=webhook
N8N_ENDPOINT_WEBHOOK_TEST=webhook-test

# ====================================
# GOOGLE SERVICES
# ====================================
# NOTE: Google Calendar IDs are per-professional in the database (professionals table).
# Only the Gemini API key is needed here.
GOOGLE_GEMINI_API_KEY=<REQUIRED>

# ====================================
# TELEGRAM
# ====================================
TELEGRAM_BOT_TOKEN=<REQUIRED>

# System admin fallback alert channel (receives errors when tenant cannot be identified)
FALLBACK_TELEGRAM_CHAT_ID=<REQUIRED>
