# ============================================================================
# MULTI-TENANT ENVIRONMENT VARIABLES
# Copy this file to .env and update with your actual values
# ============================================================================

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================
POSTGRES_USER=n8n
POSTGRES_PASSWORD=CHANGE_THIS_STRONG_PASSWORD
POSTGRES_DB=n8n
POSTGRES_PORT=5432
POSTGRES_HOST=localhost

# ============================================================================
# REDIS CONFIGURATION
# ============================================================================
REDIS_PASSWORD=CHANGE_THIS_REDIS_PASSWORD
REDIS_PORT=6379
REDIS_MAX_MEMORY=256mb

# ============================================================================
# N8N CONFIGURATION
# ============================================================================
N8N_PORT=5678
N8N_PROTOCOL=http
N8N_WEBHOOK_URL=https://your-domain.com/
N8N_ENCRYPTION_KEY=GENERATE_RANDOM_32_CHAR_STRING_HERE
N8N_JWT_SECRET=GENERATE_RANDOM_JWT_SECRET_HERE

# N8N Database
N8N_DB_SCHEMA=public

# N8N Execution Settings
N8N_EXECUTIONS_TIMEOUT=300
N8N_EXECUTIONS_TIMEOUT_MAX=3600
N8N_SAVE_ON_ERROR=all
N8N_SAVE_ON_SUCCESS=all
N8N_SAVE_ON_PROGRESS=true
N8N_DATA_MAX_AGE=168
N8N_LOG_LEVEL=info
N8N_LOG_OUTPUT=console,file

# ============================================================================
# EVOLUTION API (WhatsApp)
# ============================================================================
EVOLUTION_BASE_URL=https://your-evolution-api-domain.com
EVOLUTION_PORT=8080
EVOLUTION_API_KEY=CHANGE_THIS_EVOLUTION_API_KEY
EVOLUTION_LOG_LEVEL=ERROR

# WhatsApp Settings
WA_CONNECTION_TIMEOUT=60000
WA_RECONNECT_INTERVAL=5000
WA_PHONE_CLIENT=Evolution API Clinic
QRCODE_LIMIT=30

# ============================================================================
# MULTI-TENANT SYSTEM CONFIGURATION
# ============================================================================

# System Admin Notifications (for unknown instances, errors)
SYSTEM_ADMIN_TELEGRAM_ID=YOUR_TELEGRAM_USER_ID
SYSTEM_ADMIN_EMAIL=admin@your-clinic.com

# Shared API Keys (used by all tenants via shared credentials)
SHARED_GOOGLE_GEMINI_API_KEY=YOUR_GOOGLE_GEMINI_API_KEY

# ============================================================================
# TIMEZONE
# ============================================================================
TZ=America/Sao_Paulo

# ============================================================================
# DEPRECATED VARIABLES (Do not use - for backward compatibility only)
# ============================================================================
# These are now stored in the tenant_config database table
# GOOGLE_CALENDAR_ID=
# GOOGLE_TASKS_LIST_ID=
# TELEGRAM_INTERNAL_CHAT_ID=
# CLINIC_NAME=
# MCP_CALENDAR_ENDPOINT=

# ============================================================================
# NOTES
# ============================================================================
# 
# Multi-Tenant Setup:
# 1. All tenant-specific configuration is in PostgreSQL (tenant_config table)
# 2. Shared credentials are configured once in n8n UI
# 3. To add a new clinic:
#    - Insert row in tenant_config table (see scripts/migrations/002_seed_tenant_data.sql)
#    - Create Evolution API instance with matching name
#    - Done!
#
# Security:
# - N8N_ENCRYPTION_KEY: Generate with: openssl rand -hex 32
# - N8N_JWT_SECRET: Generate with: openssl rand -hex 32
# - POSTGRES_PASSWORD: Use strong password (16+ chars)
# - REDIS_PASSWORD: Use strong password (16+ chars)
# - EVOLUTION_API_KEY: Generate random key (32+ chars)
#
# ============================================================================

